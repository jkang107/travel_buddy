<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Travel Buddy</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/datepicker.css" rel="stylesheet">
    <link href="css/travelBuddy.css" rel="stylesheet">
    <link href="css/bootstrap-select.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/earlyaccess/jejugothic.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
</head>

<body>
    <div id='container'>
        <!-- <button id='newTravelBtn' type="button" class="btn btn-default btn-lg">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> New Travel
        </button> -->
        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#createTravel">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> New Travel
        </button>
        <a id="kakao-login-btn"></a>
        <div class="panel-group col-lg-8 col-sm-10 col-xs-12" id="accordion" role="tablist" aria-multiselectable="true">
            <div class="panel panel-default panel-success">
                <div class="panel-heading" role="tab" id="headingOne">
                    <h4 class="panel-title">
                        <a class='accordion-toggle' data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne"><i class="indicator glyphicon glyphicon-chevron-up  pull-right"></i>
                            <img src="http://mud-kage.kakao.co.kr/14/dn/btqb4CAgAzI/RQ6IGbda4CN2krpdNJ5aOk/o.jpg" class="img-circle inner_list" alt="Cinque Terre" width="50" height="50">
                            <img src="images/travel_man_64.png" class="inner_list" alt="Cinque Terre" width="50" height="50">
                            <span id='_country' class='inner_list inner_text'>#콜롬비아/보고타</span>
                            <span id='_country' class='inner_list inner_text'>#에콰도르/키토</span>
                            <span id='_country' class='inner_list inner_text'>#페루</span>
                            <span id='_country' class='inner_list inner_text inner_text_date'>5월25일 ~ 5월30일</span>
                        </a>
                      </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                        카카오톡 ID: uresj3
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-info">
                <div class="panel-heading" role="tab" id="headingTwo">
                    <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo"><i class="indicator glyphicon glyphicon-chevron-up  pull-right"></i>
          <img src="http://mud-kage.kakao.co.kr/14/dn/btqb4CAgAzI/RQ6IGbda4CN2krpdNJ5aOk/o.jpg" class="img-circle inner_list" alt="Cinque Terre" width="50" height="50">
                            <img src="images/food_64.png" class="inner_list" alt="Cinque Terre" width="50" height="50">
                            <span id='_country' class='inner_list inner_text'>#부에노스아이레스</span>
                            <span id='_country' class='inner_list inner_text inner_text_date'>6월13일 ~ 5월30일</span>
        </a>
      </h4>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                    <div class="panel-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-warning">
                <div class="panel-heading" role="tab" id="headingThree">
                    <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree"><i class="indicator glyphicon glyphicon-chevron-up  pull-right"></i>
          <img src="http://mud-kage.kakao.co.kr/14/dn/btqb4CAgAzI/RQ6IGbda4CN2krpdNJ5aOk/o.jpg" class="img-circle inner_list" alt="Cinque Terre" width="50" height="50">
                            <img src="images/taxi_64.png" class="inner_list" alt="Cinque Terre" width="50" height="50">
                            <span id='_country' class='inner_list inner_text'>#콜롬비아</span>
                            <span id='_country' class='inner_list inner_text'>#에콰도르</span>
                            <span id='_country' class='inner_list inner_text'>#페루</span>
                            <span id='_country' class='inner_list inner_text inner_text_date'>5월25일 ~ 5월30일</span>
        </a>
      </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                    <div class="panel-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade " id="createTravel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content" class='modal_style'>
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Find your new travel buddy !</h4>
                    </div>
                    <div class="modal-body">
                        <div class="panel-heading">
                            <h3 class="panel-title">Step 1. Select travel type</h3>
                        </div>
                        <div class="panel-body">
                            <div id='travel_type' class="btn-group" data-toggle="buttons" required>
                                <label id="travelWith" class="btn btn-default col-lg-3 col-sm-6 col-xs-6 active">
                                    <input type="radio" name="options" autocomplete="off">
                                    <image id="travelWith" src='images/travel_man_64.png' /> 같이 여행해요
                                </label>
                                <label id="moveWith" class="btn btn-default col-lg-3 col-sm-6 col-xs-6">
                                    <input type="radio" name="options" id="moveWith" autocomplete="off">
                                    <image id='moveWith' src='images/taxi_64.png' /> 같이 이동해요
                                </label>
                                <label id="tourWith" class="btn btn-default col-lg-3 col-sm-6 col-xs-6">
                                    <input type="radio" name="options" autocomplete="off">
                                    <image id="tourWith" src='images/biking_64.png' /> 같이 떠나요
                                </label>
                                <label id="foodWith" class="btn btn-default col-lg-3 col-sm-6 col-xs-6">
                                    <input type="radio" name="options" id="foodWith" autocomplete="off">
                                    <image id="foodWith" src='images/food_64.png' /> 같이 식사해요
                                </label>
                            </div>
                        </div>
                        <div class="panel-heading">
                            <h3 class="panel-title">Step 2. About you</h3>
                        </div>
                        <div class="panel-body">
                            <div id='client_gender' class="btn-group col-lg-5 col-sm-6 col-xs-12 panel_body_padding" data-toggle="buttons">
                                <label class='col-lg-2 col-xs-3 margin_label'>성별</label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="man" autocomplete="off">
                                    <image src='images/man_64.png' />
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="woman" autocomplete="off">
                                    <image src='images/woman_64.png' />
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="more" autocomplete="off">
                                    <image src='images/travel_man_64.png' />
                                </label>
                            </div>
                            <div id='client_age' class="btn-group col-lg-7 col-sm-6 col-xs-12 panel_body_padding" data-toggle="buttons">
                                <label class='col-lg-2 col-xs-3 margin_label'>나이대</label>
                                <label class="btn btn-default ">
                                    <input type="radio" name="options" id="age_10" value="10" autocomplete="off">10대
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="age_20" autocomplete="off"> 20대
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="age_30" autocomplete="off"> 30대
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="age_40" autocomplete="off"> 40대
                                </label>
                                <label class="btn btn-default">
                                    <input type="radio" name="options" id="age_50" autocomplete="off"> 50대~
                                </label>
                            </div>
                        </div>
                        <div class="panel-heading">
                            <h3 class="panel-title">Step 3. About travel</h3>
                        </div>
                        <div id='type1_container' style='display:block;'>
                            <div id='date_body' class="panel-body">
                                <div class="form-group">
                                    <label class='col-lg-12 col-sm-12 col-xs-12 margin_label'>여행기간 </label>
                                    <div class='col-lg-6 col-sm-6 col-xs-6 panel_body_padding'>From:
                                        <input id='travel_date_from' data-provide="datepicker">
                                    </div>
                                    <div class='col-lg-6 col-sm-6 col-xs-6 panel_body_padding'>To:
                                        <input id='travel_date_to' data-provide="datepicker">
                                    </div>
                                </div>
                            </div>
                            <div id='country_body' class="panel-body">
                                <div class="form-group">
                                    <label class='col-lg-12 col-sm-12 col-xs-12 margin_label'>여행국가</label>
                                    <div id='travel_country' class="btn-group" data-toggle="buttons">
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">콜롬비아</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">에콰도르</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">페루</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">볼리비아</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">칠레</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">아르헨티나</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">브라질</button>
                                        <button type="button" class="btn btn-default btn-lg col-lg-3 col-sm-4 col-xs-6">멕시코</button>
                                    </div>
                                </div>
                            </div>
                            <div id='comment_body' class="panel-body">
                                <div class="form-group">
                                    <label for="comment" class='margin_label col-lg-12 col-sm-12 col-xs-12'>자세히</label>
                                    <textarea id='travel_detail1' class="form-control" rows="5" id="comment"></textarea>
                                </div>
                            </div>
                        </div>
                        <div id='type2_container' style='display:none;'>
                            <div id='city_body' class='panel-body'>
                                <label class='col-lg-12 col-sm-12 col-xs-12 margin_label'>이동정보 </label>
                                <div class="col-lg-12 col-sm-12 col-xs-12 form-group">
                                    <div class='col-lg-3 col-sm-4 col-xs-12 panel_body_padding'>언제:
                                        <input id='move_when' data-provide="datepicker">
                                    </div>
                                    <div class='col-lg-1'></div>
                                    <div class="input-group col-lg-4 col-sm-4 col-xs-12" style="float:left;">
                                        <!-- <span class="input-group-addon" >출발지</span>
                            <input type="text" id="move_from" class="form-control" placeholder="도시명"> -->
                                        <select id='move_from_country' class="selectpicker" title='국가'>
                                            <option>콜롬비아</option>
                                            <option>에콰도르</option>
                                            <option>페루</option>
                                            <option>볼리비아</option>
                                            <option>칠레</option>
                                            <option>아르헨티나</option>
                                            <option>브라질</option>
                                            <option>멕시코</option>
                                        </select>
                                        <input type="text" id="move_from" class="form-control" placeholder="출발 도시명">
                                    </div>
                                    <div class="input-group col-lg-4 col-sm-4 col-xs-12" style="float:left;">
                                        <select id='move_to_country' class="selectpicker" title='국가'>
                                            <option>콜롬비아</option>
                                            <option>에콰도르</option>
                                            <option>페루</option>
                                            <option>볼리비아</option>
                                            <option>칠레</option>
                                            <option>아르헨티나</option>
                                            <option>브라질</option>
                                            <option>멕시코</option>
                                        </select>
                                        <input type="text" id="move_to" class="form-control" placeholder="도착 도시명">
                                    </div>
                                </div>
                            </div>
                            <div id='country_body' class="panel-body">
                                <div id="transportation_button" class="btn-group panel_body_padding col-lg-12 col-sm-12 col-xs-12" data-toggle="buttons">
                                    <label class='col-lg-12 col-sm-12 col-xs-12 margin_label'>이동수단</label>
                                    <label class="btn btn-default col-lg-4 col-sm-4 col-xs-4">
                                        <input type="radio" name="options" id="taxi" autocomplete="off">
                                        <image src='images/taxi-64.png' />
                                    </label>
                                    <label class="btn btn-default col-lg-4 col-sm-4 col-xs-4">
                                        <input type="radio" name="options" id="metro" autocomplete="off">
                                        <image src='images/rail_64.png' />
                                    </label>
                                    <label class="btn btn-default col-lg-4 col-sm-4 col-xs-4">
                                        <input type="radio" name="options" id="bus" autocomplete="off">
                                        <image src='images/bus-64.png' />
                                    </label>
                                </div>
                            </div>
                            <div id='comment_body' class="panel-body">
                                <div class="form-group">
                                    <label for="comment" class='margin_label col-lg-12 col-sm-12 col-xs-12'>자세히</label>
                                    <textarea id='travel_detail2' class="form-control" rows="5" id="comment"></textarea>
                                </div>
                            </div>
                        </div>
                        <div id='type3_container' style='display:none;'>
                            <div id='date_body' class="panel-body">
                                <div class="form-group">
                                    <label class='col-lg-12 col-sm-12 col-xs-12 margin_label'>여행기간 </label>
                                    <div>
                                        <div class='col-lg-6 col-sm-6 col-xs-6 panel_body_padding'>From:
                                            <input id='tour_date_from' data-provide="datepicker">
                                        </div>
                                        <div class='col-lg-6 col-sm-6 col-xs-6 panel_body_padding'>To:
                                            <input id='tour_date_to' data-provide="datepicker">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id='tour_body' class="panel-body">
                                <div class="form-group">
                                    <label class='margin_label'>투어/트레킹 명 </label>
                                    <div class="input-group col-lg-12 col-sm-12 col-xs-12">
                                        <select id='tour_contry' class="selectpicker" title='국가'>
                                            <option>콜롬비아</option>
                                            <option>에콰도르</option>
                                            <option>페루</option>
                                            <option>볼리비아</option>
                                            <option>칠레</option>
                                            <option>아르헨티나</option>
                                            <option>브라질</option>
                                            <option>멕시코</option>
                                        </select>
                                        <input type="text" id="tour_name" class="form-control" placeholder="ex) 우유니 투어, 토레스 델 파이네">
                                    </div>
                                </div>
                            </div>
                            <div id='comment_body' class="panel-body">
                                <div class="form-group">
                                    <label for="comment" class='margin_label col-lg-12 col-sm-12 col-xs-12'>자세히</label>
                                    <textarea id='travel_detail3' class="form-control" rows="5" id="comment"></textarea>
                                </div>
                            </div>
                        </div>
                        <div id='type4_container' style='display:none;'>
                            <div id='date_body' class="panel-body">
                                <div class="form-group col-lg-6 col-sm-6 col-xs-6">
                                    <label class='margin_label'>언제 </label>
                                    <div class='panel_body_padding'>
                                        <input id='food_when' data-provide="datepicker">
                                    </div>
                                </div>
                                <div class="form-group col-lg-6 col-sm-6 col-xs-6">
                                    <label class='margin_label'>어디서 </label>
                                    <div class="input-group">
                                        <select id="food_country" class="selectpicker" title='국가'>
                                            <option>콜롬비아</option>
                                            <option>에콰도르</option>
                                            <option>페루</option>
                                            <option>볼리비아</option>
                                            <option>칠레</option>
                                            <option>아르헨티나</option>
                                            <option>브라질</option>
                                            <option>멕시코</option>
                                        </select>
                                        <input type="text" id="food_city" class="form-control" placeholder="도시명">
                                    </div>
                                </div>
                            </div>
                            <div id='comment_body' class="panel-body">
                                <div class="form-group">
                                    <label for="comment" class='margin_label col-lg-12 col-sm-12 col-xs-12'>자세히</label>
                                    <textarea id='travel_detail4' class="form-control" rows="5" id="comment"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id='submit_travel' type="button" class="btn btn-primary">등록하기</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-datepicker.js"></script>
    <script src="js/bootstrap-select.min.js"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $("#submit_travel").on('click', addNewTravel);
        $("#travel_type").click(chooseTravelType);
        $("#newTravelBtn").click(showTravelForm);

        function toggleChevron(e) {
            $(e.target)
                .prev('.panel-heading')
                .find("i.indicator")
                .toggleClass('glyphicon-chevron-down glyphicon-chevron-up');
        }
        $('#accordion').on('hidden.bs.collapse', toggleChevron);
        $('#accordion').on('shown.bs.collapse', toggleChevron);

        // KAKAO TALK JavaScript Key
        Kakao.init('8153126b123d384678442ece2cfd1ed8');

        // create login button
        Kakao.Auth.createLoginButton({
            container: '#kakao-login-btn',
            success: function(authObj) {

                Kakao.API.request({
                    url: '/v1/user/me',
                    success: function(res) {
                        //alert(JSON.stringify(res));
                        //$("#nickname").text(res.properties.nickname);
                        //$("#userId").text("ID : " + res.id);
                        //$("#thumbnail_image").attr("src", res.properties.thumbnail_image);
                        //$("#profile_image").attr("src", res.properties.profile_image);
                        user_kakaotalk_thumbnail = res.properties.thumbnail_image;
                    },
                    fail: function(error) {
                        alert(JSON.stringify(error))
                    }
                });
            },
            fail: function(err) {
                console.log(JSON.stringify(err));
            }
        });

    });

    var containerNum = 1;
    var panelStyle, titleImage;
    var user_kakaotalk_thumbnail;
    var chooseTravelType = function() {
        var selectedType = event.target.id;
        console.log("select " + selectedType);

        $("#type" + containerNum + "_container").css("display", "none");

        switch (selectedType) {
            case "travelWith":
                containerNum = 1;
                break;
            case "moveWith":
                containerNum = 2;
                break;
            case "tourWith":
                containerNum = 3;
                break;
            case "foodWith":
                containerNum = 4;
                break;
        }

        $("#type" + containerNum + "_container").css("display", "block");
    }

    var addNewTravel = function() {
        var countryArr = [];
        $("#travel_country").find(".active").each(function() {
            countryArr.push($(this).text());
        });
        var travelType = $("#travel_type").find(".active").get(0).id;

        var userInfo = {
            userId: "22044723",
            travel_type: travelType,
            user_gender: $("#client_gender").find(".active").children().get(0).id,
            user_age: $("#client_age").find(".active").children().get(0).id
        }

        var travelInfo;


        switch (travelType) {
            case "travelWith":
                travelInfo = {
                    travel_type: travelType,
                    date_from: $("#travel_date_from").val(),
                    date_to: $("#travel_date_to").val(),
                    country_from: countryArr,
                    comment: $("#travel_detail1").val()
                }
                panelStyle = "panel-success";
                titleImage = "travel_man_64.png";

                break;
            case "moveWith":
                travelInfo = {
                    travel_type: travelType,
                    date_from: $("#move_when").val(),
                    country_from: $("#move_from_country option:selected").val(),
                    city_from: $("#move_from").val(),
                    country_to: $("#move_to_country option:selected").val(),
                    city_to: $("#move_to").val(),
                    transportation: $("#transportation_button").find(".active").children().get(0).id,
                    comment: $("#travel_detail2").val()
                }
                panelStyle = "panel-info";
                titleImage = "taxi_64.png";

                break;
            case "tourWith":
                travelInfo = {
                    travel_type: travelType,
                    date_from: $("#tour_date_from").val(),
                    date_to: $("#tour_date_to").val(),
                    country_from: $("#tour_contry option:selected").val(),
                    tour_name: $("#tour_name").val(),
                    comment: $("#travel_detail3").val()
                }
                panelStyle = "panel-warning";
                titleImage = "biking_64.png";

                break;
            case "foodWith":
                travelInfo = {
                    travel_type: travelType,
                    date_from: $("#food_when").val(),
                    country_from: $("#food_country option:selected").val(),
                    city_from: $("#food_city").val(),
                    comment: $("#travel_detail4").val()
                }
                panelStyle = "panel-danger";
                titleImage = "food_64.png";

                break;

        }

        createNewTravel(userInfo, travelInfo);
        console.log("==== Create new travel! ====");
        $("#createTravel").css("display", "none");
    }

    var showTravelForm = function() {
        $("#createTravel").toggle();

        //$("#container").css("opacity", "0.7");
    }
    var Travel = function(user, travelInfo) {
        /*this.type = type;
        this.gender = gender;
        this.age = age;*/
        this.id = user.userId;
        this.info = travelInfo;
    }

    function createNewTravel(user, travel) {
        var newUser = new Travel(user, travel);
        stampCurrentTime();
        sendToServer(user, travel);
        createNewObject(user, travel);

    }
    var count = 0;

    function createNewObject(user, travel) {

        $("#accordion").prepend("<div id='object_" + count + "' class='panel panel-default " + panelStyle + "'></div>");

        $("#object_" + count).append("<div class='panel-heading' role='tab' id='heading_" + count + "'><h4 class='panel-title'><a id='heading_t_" + count + "' class='collapsed' data-toggle='collapse' data-parent='#accordion' href='#collapse_" + count + "' aria-expanded='false' aria-controls='collapse_" + count + "'><i class='indicator glyphicon glyphicon-chevron-up  pull-right'></i></a></h4></div>");

        $("#object_" + count).append("<div id='collapse_" + count + "' class='panel-collapse collapse' role='tabpanel' aria-labelledby='collapse_" + count + "'><div class='panel-body'>" + travel.comment + "</div></div>");

        var tmpKakaoThumbnail = "http://mud-kage.kakao.co.kr/14/dn/btqb4CAgAzI/RQ6IGbda4CN2krpdNJ5aOk/o.jpg";

        var _object = $("#heading_t_" + count);

        //add kakaotalk
        _object.append("<img src='" + tmpKakaoThumbnail + "' class='img-circle inner_list' alt='kakaotalk thumbnail' width='35' height='35'>");

        //add travel type
        _object.append("<img src='images/" + titleImage + "' class='inner_list' alt='travel' width='35' height='35'>");

        //add gender
        var tmp_gender = user.user_gender;
        _object.append("<span id='_gender' class='inner_list inner_text'></span>");
        //var tmp_gender_class;
        if (tmp_gender == "man") {
            tmp_gender = "남";
            //tmp_gender_class = 'inner_text_gender_m';
        } else if (tmp_gender == "woman") {
            tmp_gender = "여";
            //tmp_gender_class = 'inner_text_gender_w';

        } else {
            tmp_gender = "2명이상";
            //tmp_gender_class = 'inner_text_gender_more';

        }

        $("#_gender").text(tmp_gender).addClass("inner_text_gender");

        //add age
        var tmp_age = $("#client_age").find(".active").children().get(0).id.split("_")[1] + "대";
        _object.append("<span id='_age' class='inner_list inner_text inner_text_gender'>" + tmp_age + "</span>");


        //transportation
        if (travel.hasOwnProperty('transportation')) {
            var tmp_trans = travel.transportation;
            switch (tmp_trans) {
                case "bus":
                    tmp_trans = "버스이동";
                    break;

                case "taxi":
                    tmp_trans = "택시이동";
                    break;

                case "metro":
                    tmp_trans = "지하철이동";
                    break;
            }
            _object.append("<span id='_transportation' class='inner_list inner_text inner_text_trans'>#" + tmp_trans + "</span>");
        }

        //add travel country_from
        if (typeof travel.country_from == "string") {
            _object.append("<span id='_country_from' class='inner_list inner_text'>#" + travel.country_from + "</span>");
        } else {
            for (var i = 0; i < travel.country_from.length; i++) {
                _object.append("<span id='_country_from' class='inner_list inner_text'>#" + travel.country_from[i] + "</span>");
            }
        }

        //add travel city_to
        if (travel.hasOwnProperty('city_from')) {
            _object.append("<span id='_city_from' class='inner_list inner_text'>#" + travel.city_from + "</span>");
        }

        //add tour/trekking name
        if (travel.hasOwnProperty('tour_name')) {
            _object.append("<span id='_tour_name' class='inner_list inner_text'>#" + travel.tour_name + "</span>");
        }

        //add travel date
        //date_from
        var tmp_from = travel.date_from.split("/");
        tmp_from = tmp_from[0] + "월" + tmp_from[1] + "일";

        //date_to
        if (travel.hasOwnProperty('date_to')) {
            var tmp_to = travel.date_to.split("/");
            tmp_to = tmp_to[0] + "월" + tmp_to[1] + "일";
            _object.append("<span id='_date_to' class='inner_list inner_text inner_text_date'>" + tmp_from + " ~ " + tmp_to + "</span>");
        } else {
            _object.append("<span id='_date_to' class='inner_list inner_text inner_text_date'>" + tmp_from + "</span>");
        }


        count++;
    }

    var currentTime;

    function stampCurrentTime() {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear();
        var hh = today.getHours();
        var m = today.getMinutes();
        var ss = today.getSeconds();

        currentTime = yyyy + "/" + mm + "/" + dd + " " + hh + ":" + m + ":" + ss;

    }

    function sendToServer(userInfo, travelInfo) {
        var url = "http://localhost:5000/sendTravelInfo";
        deferred = $.post(url, {
            userInfo: userInfo,
            travelInfo: travelInfo,
            time: currentTime
        });

        deferred.success(function(e) {
            console.log("Message from server : " + e);

        });

        deferred.error(function(e) {
            // Handle any errors here.
        });

    }
    </script>
</body>

</html>
